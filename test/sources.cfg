process HDQM = {
#keep the logging output to a nice level
include "FWCore/MessageLogger/data/MessageLogger.cfi"

service = AdaptorConfig {}

############# DQM
  include "DQM/SiStripHistoricInfoClient/data/tif.cfi"
  replace PoolSource.maxEvents = -1

  # magnetic field
  include "Geometry/CMSCommonData/data/cmsMagneticFieldXML.cfi"
  include "MagneticField/Engine/data/uniformMagneticField.cfi"
  replace UniformMagneticFieldESProducer.ZFieldInTesla = 0.0
  es_prefer = UniformMagneticFieldESProducer{}

  # tracker geometry
  include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
 
  # tracker numbering
  include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
 
  # cms geometry
  include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"


############# DQM
  # DQM services
  service = DaqMonitorROOTBackEnd{}

  # tracer service - very verbose - useful for debugging only
#  service = Tracer { untracked string indention = "$$"}

  # can comment out MonitorDeamon if you want to run without DQMCollector - this should go as include in DQMServices
#  include "DQM/SiStripMonitorCluster/data/MonitorDaemon.cfi"
##  replace MonitorDaemon.DestinationAddress = "localhost"
#  replace MonitorDaemon.DestinationAddress = "lxplus205"
#  replace MonitorDaemon.UpdateDelay = 1000

  # SiStripMonitorDigi
  include "DQM/SiStripMonitorDigi/data/SiStripMonitorDigi_RealData.cfi"
  # use the following flag to select all detectors (e.g. for mtcc data). by default is false
  replace SiStripMonitorDigi.SelectAllDetectors = false

  # SiStripMonitorCluster
  include "DQM/SiStripMonitorCluster/data/SiStripMonitorCluster.cfi"
  # use the following flag to select all detectors (e.g. for mtcc data). by default is false
  replace SiStripMonitorCluster.OutputMEsInRootFile = true
  replace SiStripMonitorCluster.UseCalibDataFromDB = true # this is for the noise service
  replace SiStripMonitorCluster.SelectAllDetectors = false

/*
  # event coordinates
  module eventInfoProvider = EventCoordinatesSource {
       untracked string eventInfoFolder = "EventInfo/"
       #"Collector/FU0/EventInfo"#
  }
*/


######################## Access to ORCOFF via Frontier
  es_source = PoolDBESSource {
    VPSet toGet = {
#      { string record = "SiStripPedestalsRcd" string tag = "SiStripPedNoise_TIBTOB_v1_p"},
      { string record = "SiStripNoisesRcd" string tag = "SiStripPedNoise_TIBTOB_v1_n"},
      { string record = "SiStripFedCablingRcd" string tag = "SiStripCabling_TIBTOB_v1"}}
   
    string connect = "frontier://cms_conditions_data/CMS_COND_STRIP"
    string timetype = "runnumber"
    untracked string BlobStreamerName="DefaultBlobStreamingService"
   PSet DBParameters ={
      untracked string authenticationPath = ""
   }
  }

  es_module sistripconn = SiStripConnectivity {}

  service = LockService {
    untracked vstring labels = { "source" }
  }

######################## Scheduling
  path p = {SiStripMonitorCluster}

}
