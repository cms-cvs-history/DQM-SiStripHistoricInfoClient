process PWRITE = {
    
    #########################
    # message logger
    #########################
    
    service = MessageLogger {
	untracked vstring destinations = { "log/destinationFile" }
	untracked PSet destinationFile = { untracked string threshold = "INFO"} 
    }
    
    
    #########################
    # maxEvents ...
    #########################
    
    untracked PSet maxEvents = {untracked int32 input = 1}
    source = EmptySource { 
	string timetype = "runnumber"
	untracked uint32 firstRun = 1
	untracked uint32 lastRun  = 1
	uint32 interval = 1
    }
    
    #########################
    # DQM services
    #########################
    include "DQMServices/Core/data/DQM.cfg"
    
    
    ########################
    # DB parameters
    ########################
    
    service = PoolDBOutputService{
	string connect = "connectString"    
	#
	untracked string timetype = "runnumber"    
	#untracked string BlobStreamerName="DefaultBlobStreamingService"
	#untracked string BlobStreamerName="TBufferBlobStreamingService"
	#
	PSet DBParameters = {
	    untracked string authenticationPath="/afs/cern.ch/cms/DB/conddb"
	    untracked int32 messageLevel=4
	}
	VPSet toPut={ 
	    { string record = "SiStripSummaryRcd" string tag="insertTag"}
	}
	untracked string logconnect = "sqlite_file:log.db"	
    }
    
    

    ########################
    # HistoricDQMService
    ########################
    
    service = SiStripHistoricDQMService {  
	
	untracked string FILE_NAME    = 'theFileName'
	untracked string ME_DIR       = 'Run theRunNr'

	
	PSet HList = {	    	    
	    VPSet histoList = {
		//quantities are 'stat', 'landau', 'gauss'
		//where 
		//'stat' includes entries, mean, rms
		//'landau' includes
		//'gauss' includes gaussMean, gaussSigma

		
		//CosmicTk
		{ untracked string keyName = "Chi2_CosmicTk"  untracked vstring quantitiesToExtract = {'stat'} }
		,
		{ untracked string keyName = "NumberOfTracks_CosmicTk"  untracked vstring quantitiesToExtract = {'stat'} }
		,
		{ untracked string keyName = "NumberOfREcHitsPerTrack_CosmicTk"  untracked vstring quantitiesToExtract = {'stat'} }
		
		//CKFTk
		,
		{ untracked string keyName = "Chi2_CKFTk"  untracked vstring quantitiesToExtract = {'stat'} }
		,
		{ untracked string keyName = "NumberOfTracks_CKFTk"  untracked vstring quantitiesToExtract = {'stat'} }
		,
		{ untracked string keyName = "NumberOfREcHitsPerTrack_CKFTk"  untracked vstring quantitiesToExtract = {'stat'} }
		
		//RSTk
		,
		{ untracked string keyName = "Chi2_RSTk"  untracked vstring quantitiesToExtract = {'stat'} }
		,
		{ untracked string keyName = "NumberOfTracks_RSTk"  untracked vstring quantitiesToExtract = {'stat'} }
		,
		{ untracked string keyName = "NumberOfREcHitsPerTrack_RSTk"  untracked vstring quantitiesToExtract = {'stat'} }
		,


		//Summary Cluster Properties
		{ untracked string keyName = "Summary_NumberOfClusters_OffTrack"  untracked vstring quantitiesToExtract = {'stat'} }
		,
		{ untracked string keyName = "Summary_NumberOfClusters_OnTrack"  untracked vstring quantitiesToExtract = {'stat'} }
		,
		{ untracked string keyName = "Summary_cChargeCorr_OnTrack"  untracked vstring quantitiesToExtract = {'stat','landau'} }
		,
		{ untracked string keyName = "Summary_cCharge_OffTrack"  untracked vstring quantitiesToExtract = {'stat','landau'} }
		,
		{ untracked string keyName = "Summary_cNoise_OnTrack"  untracked vstring quantitiesToExtract = {'stat','gauss'} }
		,
		{ untracked string keyName = "Summary_cNoise_OffTrack"  untracked vstring quantitiesToExtract = {'stat','gauss'} }
		,
		{ untracked string keyName = "Summary_cStoNCorr_OnTrack"  untracked vstring quantitiesToExtract = {'stat','landau'} }
		,
		{ untracked string keyName = "Summary_cStoN_OffTrack"  untracked vstring quantitiesToExtract = {'stat','landau'} }
		,
		{ untracked string keyName = "Summary_cWidth_OnTrack"  untracked vstring quantitiesToExtract = {'stat'} }
		,
		{ untracked string keyName = "Summary_cWidth_OffTrack"  untracked vstring quantitiesToExtract = {'stat'} }
	
		//Single module based quantities
		//,
		//{ untracked string keyName = "NumberOfClusters"  untracked vstring quantitiesToExtract = {'stat'} }
		//,
		//{ untracked string keyName = "ClusterCharge"  untracked vstring quantitiesToExtract = {'stat'} }
	    }
	}
	
    }	


    module siStripPopConHistoricDQM = SiStripPopConHistoricDQM {
	string record = "SiStripSummaryRcd"
	untracked bool loggingOn = True
	bool SinceAppendMode = true
	PSet Source ={
	    untracked uint32 since = theRunNr
	    untracked bool debug = true
	}
	
    }

    # Schedule
    path p = { siStripPopConHistoricDQM }
    module print = AsciiOutputModule {}
    endpath ep = { print }
}
