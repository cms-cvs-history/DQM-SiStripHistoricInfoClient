process TIFDQMSources = {

     service = MessageLogger {
      untracked vstring destinations = { "cout" }
      untracked PSet cout = { untracked string threshold = "INFO" }
      untracked vstring debugModules   = { "SiStripZeroSuppression", "SiStripClusterizer"}
   }
  
  
     service = DQMStore {
      untracked string referenceFileName = "" 
      untracked int32 verbose = 0 
   }


    #-------------------------------------------------
    ## MAGNETIC FIELD
    #-------------------------------------------------
    #  include "Geometry/CMSCommonData/data/cmsMagneticFieldXML.cfi"
    include "MagneticField/Engine/data/uniformMagneticField.cfi"
    replace UniformMagneticFieldESProducer.ZFieldInTesla = 0.0
    es_prefer = UniformMagneticFieldESProducer{}


    #-------------------------------------------------
    ## GEOMETRY
    #-------------------------------------------------
    
    # tracker geometry
    include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
    
    # tracker numbering
    include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
    
    # cms geometry
    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
    
    #-------------------------------------------------
    ## CALIBRATION
    #-------------------------------------------------
    
    include "CalibTracker/Configuration/data/Tracker_FakeConditions.cff"
   

    #-----------------------
    ####  Reconstruction Modules
    #-----------------------
    
    include "RecoLocalTracker/SiStripZeroSuppression/data/SiStripZeroSuppression_SimData.cfi"
    
    include "EventFilter/SiStripRawToDigi/data/SiStripDigis.cfi"
    replace SiStripDigis.ProductLabel="source"

    #include "RecoLocalTracker/SiStripZeroSuppression/data/SiStripZeroSuppression.cfi"

    #include "RecoLocalTracker/SiStripClusterizer/data/SiStripClusterizer_RealData.cfi"
    #replace siStripClusters.SiStripQualityLabel="test1"

    #include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitMatcher.cfi"



    #-----------------------
    ####  Source
    #-----------------------
  
    service = AdaptorConfig {}
    
    untracked PSet maxEvents = {untracked int32 input = 100}
   
    source = PoolSource { 
	 untracked vstring fileNames = {'/store/relval/2008/3/12/RelVal-RelValMinbias-1205351746/0000/242B489E-91F0-DC11-874B-000423D9A212.root'}}

       
  
    #--------------------------
    #### DQM
    #--------------------------
   
     
    #### historic DQM ####
    module historicOfflineClient = HistoricOfflineClient {
    untracked string outputFile = "hclient.root"
    untracked bool writeHisto = false }


    #### SiStripMonitorDigi ####
    include "DQM/SiStripMonitorDigi/data/SiStripMonitorDigi_RealData.cfi"
    # use the following flag to select all detectors (e.g. for mtcc data). by default is false
    replace SiStripMonitorDigi.SelectAllDetectors = true


    #### SiStripMonitorCluster ####
    include "DQM/SiStripMonitorCluster/data/SiStripMonitorCluster.cfi"
    # use the following flag to select all detectors (e.g. for mtcc data). by default is false
    replace SiStripMonitorCluster.FillSignalNoiseHistos = false
    replace SiStripMonitorCluster.OutputMEsInRootFile = false
    replace SiStripMonitorCluster.SelectAllDetectors = true


    #### historic db ####
    service = PoolDBOutputService{
    string connect = "sqlite_file:historicDQM.db"    
    untracked string timetype = "runnumber"    
    #blob      untracked string BlobStreamerName="DefaultBlobStreamingService"
    PSet DBParameters = {
   	untracked string authenticationPath="/afs/cern.ch/cms/DB/conddb"
   	untracked int32 messageLevel=2
    }
    VPSet toPut={ { string record = "SiStripPerformanceSummaryRcd" string tag ="SiStripPerformanceSummaryRcd_v1"} } }
        
	
  
    #----------------------------
    #### Scheduling
    #-----------------------------
    
    
    path p = {
	      #SiStripDigis,siStripZeroSuppression,SiStripMonitorDigi, SiStripMonitorCluster, historicOfflineClient
              SiStripDigis,siStripZeroSuppression,SiStripMonitorDigi,SiStripMonitorCluster, historicOfflineClient 
	      }


    module print = AsciiOutputModule {}
    endpath ep = { print }


}
